@using Funeral.App.Enums
@model Funeral.App.ViewModels.MakeItViewModel
@{
    ViewData["Title"] = "Направи си";
}
<!DOCTYPE html>
<html>
<head>
    <script src="https://kit.fontawesome.com/3c54b527d8.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="~/css/Main.css">
</head>
<body>
    <aside id="menu-items">

        <ul>
            <li><a href="/MakeIt/ChangeToFrames">Рамки</a></li>
            <li><a href="/MakeIt/ChangeToTexts">Текстове</a></li>
            <li><a href="/MakeIt/ChangeToCrosses">Кръстове</a></li>
            @if (User.Identity.Name == "stef4otm@gmail.com")
            {
                <div class="dropdown">
                    <button class="dropbtn">Администрация</button>
                    <div class="dropdown-content">
                        <a href="/Admin/UploadFrame">Качване на рамка</a>
                        <a href="/Admin/UploadCross">Качване на кръст</a>
                        <a href="/Admin/UploadText">Качване на текст</a>
                    </div>
                </div>
            }
        </ul>

    </aside>

    <section id="design">
        <div id="main-window">

            <img id="background" name="background" src="@Model.CurrentFrame" alt="">
            <img width="70px" id="cross" name="cross" src="@Model.CurrentCross" alt="">
            <div id="pic-border">
                <img id="face" name="picture" src="@Model.Picture" alt="">
            </div>

            <div id="uploadImageForm">
                <form method="post" enctype="multipart/form-data" asp-controller="MakeIt" asp-action="UploadImage">
                    <input id="inputBtn" type="file" name="imgFile" />
                    <button id="uploadBtn" type="submit"><i class="fas fa-upload"></i></button>
                </form>

            </div>

            <form method="post" asp-action="SaveCurrentWork">
                <textarea name="crossText" id="cross-text">@Model.CrossText</textarea>
                <textarea name="afterCrossText" id="after-cross-text">@Model.AfterCrossText</textarea>
                <textarea name="fullName" id="full-name">@Model.FullName</textarea>
                <textarea name="year" id="year">@Model.Year</textarea>
                <textarea name="mainText" id="main-text">@Model.CurrentText</textarea>
                <textarea name="panahida" id="panahida">@Model.Panahida</textarea>
                <textarea name="from" id="from">@Model.From</textarea>

                <button type="submit" id="save-work"><i class="fas fa-save"></i></button>
            </form>

            <form method="post" asp-action="SaveToDbAsync">
                <span name="background" id="bg" value="@Model.CurrentFrame"></span>
                <span name="cross" id="cr" value="@Model.CurrentCross"></span>
                <span name="picture" id="pr" value="@Model.Picture"></span>
                <span name="crossText" id="ct" value="@Model.CrossText"></span>
                <span name="fullName" id="fn" value="@Model.FullName"></span>
                <span name="year" id="ye" value="@Model.Year"></span>
                <span name="mainText" id="mt" value="@Model.CurrentText"></span>
                <span name="panahida" id="ph" value="@Model.Panahida"></span>
                <span name="from" id="fr" value="@Model.From"></span>

                <button type="submit" id="total-save"><i class="fas fa-share-square"></i></button>
            </form>

        </div>



        <div id="items">

            @if (Model.Elements == Elements.Frames)
            {
                foreach (var frame in Model.AllFrames)
                {
                    <a href="/MakeIt/ChangeFrame?frameId=@frame.FrameId"><img class="elements" src="@frame.FilePath" alt="image"></a>
                }
            }
            else if (Model.Elements == Elements.Crosses)
            {
                foreach (var cross in Model.AllCrosses)
                {
                    <a href="/MakeIt/ChangeCross?crossId=@cross.CrossId"><img class="elements" src="@cross.FilePath" alt="image"></a>
                }
            }
            else if (Model.Elements == Elements.Texts)
            {
                foreach (var text in Model.AllTexts)
                {
                    <a href="/MakeIt/ChangeText?textId=@text.TextId"><p class="elements side-texts">@text.TextTemplate</p></a>
                }
            }

        </div>
    </section>
</body>
</html>