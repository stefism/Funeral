@model Funeral.App.ViewModels.CurrentObituaryViewModel
@{
    ViewData["Title"] = "Вашият некролог";
}

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <script src="https://kit.fontawesome.com/3c54b527d8.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="~/css/Current.css">
</head>

<body>
    <section id="design">
        <div id="main-window">

            <img id="background" name="background" src="@Model.Background" alt="">
            <img width="70px" id="cross" name="cross" src="@Model.Cross" alt="">
            <div id="pic-border">
                <img id="face" name="picture" src="@Model.Picture" alt="">
            </div>

            <div id="text-elements">
                <textarea name="crossText" id="cross-text">@Model.CrossText</textarea>
                <textarea name="afterCrossText" id="after-cross-text">@Model.AfterCrossText</textarea>
                <textarea name="fullName" id="full-name">@Model.FullName</textarea>
                <textarea name="year" id="year">@Model.Year</textarea>
                <textarea name="mainText" id="main-text">@Model.MainText</textarea>
                <textarea name="panahida" id="panahida">@Model.Panahida</textarea>
                <textarea name="from" id="from">@Model.FromWhere</textarea>
            </div>

        </div>
    </section>
    <button class="btn btn-success" type="button" id="btn">Направи PDF файл.</button>
</body>

@section Scripts {
    <script>
        window.onload = function () {
            document.getElementById("btn")
                .addEventListener("click",
                    () => {
                        const invoice = this.document.getElementById("main-window");
                        console.log(invoice);
                        console.log(window);
                        var opt = {
                            margin: 0,
                            filename: 'Nekrolog.pdf',
                            image: { type: 'jpeg', quality: 1.00 },
                            html2canvas: { scale: 1, useCORS: true },
                            jsPDF: {
                                unit: 'mm',
                                format: [210, 297],
                                orientation: 'portrait'
                            }
                        };
                        html2pdf().from(invoice).set(opt).save();
                    });
        };
    </script>
}